"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[999],{88129:function(r,e,t){t.d(e,{Z:function(){return w}});var n=t(4942),a=t(15671),i=t(43144),s=t(97326),o=t(60136),c=t(29388),u=t(11752),p=t(61120),f=t(2609),h=t(87485),d=t(98689),v=t(39702),l=t.n(v);function g(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function m(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?g(Object(t),!0).forEach((function(e){(0,n.Z)(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}var w=function(r){(0,o.Z)(t,r);var e=(0,c.Z)(t);function t(r){var i,o;(0,a.Z)(this,t);var c=r.config,f=r.state;if(o=e.call(this,{config:c,state:f}),(0,n.Z)((0,s.Z)(o),"_providerEngineProxy",null),!c.chainConfig)throw h.Ty.invalidProviderConfigError("Please provide chainConfig");if(!c.chainConfig.chainId)throw h.Ty.invalidProviderConfigError("Please provide chainId inside chainConfig");if(!c.chainConfig.rpcTarget)throw h.Ty.invalidProviderConfigError("Please provide rpcTarget inside chainConfig");return o.defaultState={chainId:"loading"},o.defaultConfig={chainConfig:c.chainConfig,networks:(0,n.Z)({},c.chainConfig.chainId,c.chainConfig)},(0,u.Z)((i=(0,s.Z)(o),(0,p.Z)(t.prototype)),"initialize",i).call(i),o}return(0,i.Z)(t,[{key:"provider",get:function(){return this._providerEngineProxy},set:function(r){throw new Error("Method not implemented.")}},{key:"addChain",value:function(r){if(!r.chainId)throw d.ethErrors.rpc.invalidParams("chainId is required");if(!r.rpcTarget)throw d.ethErrors.rpc.invalidParams("chainId is required");this.configure({networks:m(m({},this.config.networks),{},(0,n.Z)({},r.chainId,r))})}},{key:"getChainConfig",value:function(r){var e,t=null===(e=this.config.networks)||void 0===e?void 0:e[r];if(!t)throw d.ethErrors.rpc.invalidRequest("Chain ".concat(r," is not supported, please add chainConfig for it"));return t}},{key:"getProviderEngineProxy",value:function(){return this._providerEngineProxy}},{key:"updateProviderEngineProxy",value:function(r){this._providerEngineProxy?this._providerEngineProxy.setTarget(r):this._providerEngineProxy=(0,f.qY)(r)}}]),t}(f.xG);l()()},89999:function(r,e,t){t.r(e),t.d(e,{PhantomInjectedProvider:function(){return N},PrivateKeyWallet:function(){return k},SolanaPrivateKeyProvider:function(){return R},SolanaWallet:function(){return H},TorusInjectedProvider:function(){return W}});var n=t(37762),a=t(60136),i=t(29388),s=t(74165),o=t(15861),c=t(15671),u=t(43144),p=t(4942),f=t(29068),h=t(80889),d=t.n(h),v=t(79955),l=t.n(v),g=t(2609),m=t(23484),w=t(87485),y=t(88129),Z=t(98689),x=t(40918).Buffer,k=function(){function r(e){(0,c.Z)(this,r),(0,p.Z)(this,"provider",void 0),this.provider=e}return(0,u.Z)(r,[{key:"requestAccounts",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){var e;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"requestAccounts",params:{}});case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"signAndSendTransaction",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.signTransaction(e);case 2:return t=r.sent,r.next=5,this.provider.request({method:"sendTransaction",params:[l().encode(t.serialize())]});case 5:return n=r.sent,r.abrupt("return",{signature:n});case 7:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.signTransaction(e);case 2:return t=r.sent,r.next=5,this.provider.request({method:"sendTransaction",params:[l().encode(t.serialize())]});case 5:return n=r.sent,r.abrupt("return",{signature:n});case 7:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"solanaPrivateKey"});case 2:return t=r.sent,n=f.RG.fromSecretKey(x.from(t,"hex")),e.partialSign(n),r.abrupt("return",e);case 6:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"solanaPrivateKey"});case 2:return t=r.sent,n=f.RG.fromSecretKey(x.from(t,"hex")),r.abrupt("return",e.map((function(r){return r.partialSign(n),r})));case 5:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signMessage",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n,a;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"solanaPrivateKey"});case 2:return t=r.sent,n=f.RG.fromSecretKey(x.from(t,"hex")),a=d().sign.detached(e,n.secretKey),r.abrupt("return",a);case 6:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"request",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request(e);case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()}]),r}();function b(r){return function(e,t,n,a){return"solana_chainId"===e.method?(t.result=r,a()):n()}}function P(r){return function(e,t,n,a){return"solana_provider_config"===e.method?(t.result=r,a()):n()}}function O(r){var e=r.chainId;return(0,m.UZ)([b(e),P(r)])}function E(r){var e=r.rpcTarget,t=(0,g.v$)({rpcTarget:e});return{networkMiddleware:(0,m.UZ)([O(r),t]),fetchMiddleware:t}}function C(r){var e=r.getAccounts;return(0,m.Pk)(function(){var r=(0,o.Z)((0,s.Z)().mark((function r(t,n,a){var i;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("getAccounts"===t.method){r.next=3;break}return r.abrupt("return",a());case 3:if(e){r.next=5;break}throw new Error("WalletMiddleware - opts.getAccounts not provided");case 5:return r.next=7,e(t);case 7:return i=r.sent,n.result=i,r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}())}function j(r){var e=r.requestAccounts;return(0,m.Pk)(function(){var r=(0,o.Z)((0,s.Z)().mark((function r(t,n,a){var i;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("requestAccounts"===t.method){r.next=3;break}return r.abrupt("return",a());case 3:if(e){r.next=5;break}throw new Error("WalletMiddleware - opts.requestAccounts not provided");case 5:return r.next=7,e(t);case 7:return i=r.sent,n.result=i,r.abrupt("return",void 0);case 10:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}())}function A(r,e){return(0,m.Pk)(function(){var t=(0,o.Z)((0,s.Z)().mark((function t(n,a,i){var o;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.method===r){t.next=3;break}return t.abrupt("return",i());case 3:if(e){t.next=5;break}throw new Error("WalletMiddleware - ".concat(r," not provided"));case 5:return t.next=7,e(n);case 7:return o=t.sent,a.result=o,t.abrupt("return",void 0);case 10:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())}function q(r){var e=r.getAccounts,t=r.requestAccounts,n=r.signTransaction,a=r.signAndSendTransaction,i=r.signAllTransactions,s=r.signMessage,o=r.getPrivateKey;return(0,m.UZ)([j({requestAccounts:t}),C({getAccounts:e}),A("signTransaction",n),A("signAndSendTransaction",a),A("signAllTransactions",i),A("signMessage",s),A("solanaPrivateKey",o)])}function S(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function T(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?S(Object(t),!0).forEach((function(e){(0,p.Z)(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}function I(r){return(0,m.Pk)(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t,n,a){var i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request(T({},t));case 2:i=e.sent,n.result=i;case 4:case"end":return e.stop()}}),e)})));return function(r,t,n){return e.apply(this,arguments)}}())}var K=function(r){var e={requestAccounts:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.publicKey?[l().encode(r.publicKey.toBytes())]:[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.publicKey?[l().encode(r.publicKey.toBytes())]:[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:throw Z.ethErrors.rpc.methodNotSupported();case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),signTransaction:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,a,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l().decode(t.params.message),a=f.YW.from(n),e.next=4,r.signTransaction(a);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signMessage:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"signMessage",params:{message:null===(n=t.params)||void 0===n?void 0:n.message}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAndSendTransaction:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,a,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l().decode(t.params.message),a=f.YW.from(n),e.next=4,r.signAndSendTransaction(a);case 4:return i=e.sent,e.abrupt("return",{signature:i.signature});case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAllTransactions:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,a,i,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message&&null!==(a=t.params)&&void 0!==a&&a.message.length){e.next=2;break}throw Z.ethErrors.rpc.invalidParams("message");case 2:return i=t.params.message.map((function(r){var e=l().decode(r);return f.YW.from(e)})),e.next=5,r.signAllTransactions(i);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return e};function M(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function _(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?M(Object(t),!0).forEach((function(e){(0,p.Z)(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}var N=function(r){(0,a.Z)(t,r);var e=(0,i.Z)(t);function t(r){(0,c.Z)(this,t);var n=r.config,a=r.state;return e.call(this,{config:{chainConfig:_(_({},n.chainConfig),{},{chainNamespace:w.EN.SOLANA})},state:a})}return(0,u.Z)(t,[{key:"switchChain",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve());case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n,a,i,o,c;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=K(e),n=q(t),a=O(this.config.chainConfig),i=I(e),(o=new m.eI).push(n),o.push(a),o.push(i),c=(0,g.Xj)(o),this.updateProviderEngineProxy(c),r.next=12,this.lookupNetwork(e);case 12:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.config.chainConfig,this.update({chainId:t.chainId}),r.abrupt("return",t.chainId||"");case 3:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()}]),t}(y.Z),D=function(r){var e={requestAccounts:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"solana_requestAccounts",params:{}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAccounts:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"solana_accounts",params:{}});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPrivateKey:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:throw Z.ethErrors.rpc.methodNotSupported();case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),signMessage:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.request({method:"sign_message",params:{data:null===(n=t.params)||void 0===n?void 0:n.message}});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signTransaction:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,a,i,o,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message){e.next=2;break}throw Z.ethErrors.rpc.invalidParams("message");case 2:return a=l().decode(t.params.message).toString("hex"),e.next=5,r.request({method:"sign_transaction",params:{message:a}});case 5:return i=e.sent,o=x.from(i,"hex"),c=f.YW.from(o),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAndSendTransaction:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,a,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=t.params)&&void 0!==n&&n.message){e.next=2;break}throw Z.ethErrors.rpc.invalidParams("message");case 2:return a=l().decode(t.params.message).toString("hex"),e.next=5,r.request({method:"send_transaction",params:{message:a}});case 5:return i=e.sent,e.abrupt("return",{signature:i});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),signAllTransactions:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var a,i,o,c,u,p,f,h;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(a=t.params)&&void 0!==a&&a.message&&null!==(i=t.params)&&void 0!==i&&i.message.length){e.next=2;break}throw Z.ethErrors.rpc.invalidParams("message");case 2:o=[],c=(0,n.Z)(t.params.message);try{for(c.s();!(u=c.n()).done;)p=u.value,f=l().decode(p).toString("hex"),o.push(f)}catch(s){c.e(s)}finally{c.f()}return e.next=7,r.request({method:"sign_all_transactions",params:{message:o}});case 7:return h=e.sent,e.abrupt("return",h);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return e};function z(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function U(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?z(Object(t),!0).forEach((function(e){(0,p.Z)(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}var W=function(r){(0,a.Z)(t,r);var e=(0,i.Z)(t);function t(r){(0,c.Z)(this,t);var n=r.config,a=r.state;return e.call(this,{config:{chainConfig:U(U({},n.chainConfig),{},{chainNamespace:w.EN.SOLANA})},state:a})}return(0,u.Z)(t,[{key:"switchChain",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve());case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.handleInjectedProviderUpdate(e),r.next=3,this.setupEngine(e);case 3:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){var e,t,n;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.provider){r.next=2;break}throw Z.ethErrors.provider.custom({message:"Torus solana provider is not initialized",code:4902});case 2:return e=this.config.chainConfig.chainId,r.next=5,this.provider.request({method:"solana_chainId"});case 5:if(t=r.sent,n=(0,w.H2)(t.toString())?t:"0x".concat(parseInt(t,10).toString(16)),e===n){r.next=9;break}throw w.Ty.rpcConnectionError("Invalid network, net_version is: ".concat(n,", expected: ").concat(e));case 9:return this.update({chainId:n}),this.provider.emit("connect",{chainId:this.state.chainId}),this.provider.emit("chainChanged",this.state.chainId),r.abrupt("return",this.state.chainId);case 13:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"setupEngine",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n,a,i,o;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=D(e),n=q(t),a=I(e),(i=new m.eI).push(n),i.push(a),o=(0,g.Xj)(i),this.updateProviderEngineProxy(o),r.next=10,this.lookupNetwork();case 10:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"handleInjectedProviderUpdate",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t=this;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.on("accountsChanged",function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.provider.emit("accountsChanged",e);case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),e.on("chainChanged",function(){var r=(0,o.Z)((0,s.Z)().mark((function r(n){var a;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=(0,w.H2)(n)?n:"0x".concat(parseInt(n,10).toString(16)),t.configure({chainConfig:U(U({},t.config.chainConfig),{},{chainId:a})}),r.next=4,t.setupProvider(e);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}]),t}(y.Z);function Y(r){return B.apply(this,arguments)}function B(){return B=(0,o.Z)((0,s.Z)().mark((function r(e){var t,a,i,c,u,p;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.privKey,a=e.getProviderEngineProxy,i=function(r){var e=l().decode(r);return f.YW.from(e)},c=function(){return f.RG.fromSecretKey(x.from(t,"hex"))},"string"===typeof t){r.next=5;break}throw w.Ty.invalidParams("privKey must be a string");case 5:return u=c(),p={requestAccounts:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",[u.publicKey.toBase58()]);case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getAccounts:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",[u.publicKey.toBase58()]);case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),getPrivateKey:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",t);case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),signTransaction:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n,a;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(t=e.params)&&void 0!==t&&t.message){r.next=2;break}throw Z.ethErrors.rpc.invalidParams("message");case 2:return(a=i(null===(n=e.params)||void 0===n?void 0:n.message)).partialSign(u),r.abrupt("return",a);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signMessage:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(t=e.params)&&void 0!==t&&t.message){r.next=2;break}throw Z.ethErrors.rpc.invalidParams("message");case 2:return n=d().sign.detached(e.params.message,u.secretKey),r.abrupt("return",n);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signAndSendTransaction:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n,o,c,p;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(t=e.params)&&void 0!==t&&t.message){r.next=2;break}throw Z.ethErrors.rpc.invalidParams("message");case 2:if(o=a()){r.next=5;break}throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 5:return(c=i(null===(n=e.params)||void 0===n?void 0:n.message)).sign(u),r.next=9,o.request({method:"sendTransaction",params:[l().encode(c.serialize())]});case 9:return p=r.sent,r.abrupt("return",{signature:p});case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),signAllTransactions:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,a,o,c,p,f,h,d;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(t=e.params)&&void 0!==t&&t.message&&null!==(a=e.params)&&void 0!==a&&a.message.length){r.next=2;break}throw Z.ethErrors.rpc.invalidParams("message");case 2:o=[],c=(0,n.Z)((null===(h=e.params)||void 0===h?void 0:h.message)||[]);try{for(c.s();!(p=c.n()).done;)f=p.value,(d=i(f)).partialSign(u),o.push(d)}catch(s){c.e(s)}finally{c.f()}return r.abrupt("return",o);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},r.abrupt("return",p);case 8:case"end":return r.stop()}}),r)}))),B.apply(this,arguments)}function G(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),t.push.apply(t,n)}return t}function L(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?G(Object(t),!0).forEach((function(e){(0,p.Z)(r,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))}))}return r}var R=function(r){(0,a.Z)(t,r);var e=(0,i.Z)(t);function t(r){(0,c.Z)(this,t);var n=r.config,a=r.state;return e.call(this,{config:{chainConfig:L(L({},n.chainConfig),{},{chainNamespace:w.EN.SOLANA})},state:a})}return(0,u.Z)(t,[{key:"enable",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this.state.privateKey){r.next=2;break}throw Z.ethErrors.provider.custom({message:"Private key is not found in state, plz pass it in constructor state param",code:4902});case 2:return r.next=4,this.setupProvider(this.state.privateKey);case 4:return r.abrupt("return",this._providerEngineProxy.request({method:"eth_accounts"}));case 5:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"setupProvider",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n,a,i,o,c;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Y({privKey:e,getProviderEngineProxy:this.getProviderEngineProxy.bind(this)});case 2:return t=r.sent,n=q(t),a=new m.eI,i=E(this.config.chainConfig),o=i.networkMiddleware,a.push(this.getChainSwitchMiddleware()),a.push(this.getAccountMiddleware()),a.push(n),a.push(o),c=(0,g.Xj)(a),this.updateProviderEngineProxy(c),r.next=14,this.lookupNetwork();case 14:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._providerEngineProxy){r.next=2;break}throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r.next=4,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 4:if(r.sent===e.privateKey){r.next=14;break}return r.next=8,this.setupProvider(e.privateKey);case 8:return r.t0=this._providerEngineProxy,r.next=11,this._providerEngineProxy.request({method:"requestAccounts"});case 11:r.t1=r.sent,r.t2={accounts:r.t1},r.t0.emit.call(r.t0,"accountsChanged",r.t2);case 14:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"switchChain",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._providerEngineProxy){r.next=2;break}throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return t=this.getChainConfig(e.chainId),this.update({chainId:"loading"}),this.configure({chainConfig:t}),r.next=7,this._providerEngineProxy.request({method:"solanaPrivateKey"});case 7:return n=r.sent,r.next=10,this.setupProvider(n);case 10:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"lookupNetwork",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){var e,t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(this._providerEngineProxy){r.next=2;break}throw Z.ethErrors.provider.custom({message:"Provider is not initialized",code:4902});case 2:return r.next=4,this._providerEngineProxy.request({method:"getHealth",params:[]});case 4:if(e=r.sent,t=this.config.chainConfig,"ok"===e){r.next=8;break}throw w.Ty.rpcConnectionError("Failed to lookup network for following rpc target: ".concat(t.rpcTarget));case 8:return this.update({chainId:t.chainId}),this.state.chainId!==t.chainId&&(this.provider.emit("chainChanged",this.state.chainId),this.provider.emit("connect",{chainId:this.state.chainId})),r.abrupt("return",this.state.chainId);case 11:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"getChainSwitchMiddleware",value:function(){var r=this,e={addNewChainConfig:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,a,i,o,c,u;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.params){e.next=2;break}throw Z.ethErrors.rpc.invalidParams("Missing request params");case 2:if(n=t.params,a=n.chainId,i=n.chainName,o=n.rpcUrls,c=n.blockExplorerUrls,u=n.nativeCurrency,a){e.next=5;break}throw Z.ethErrors.rpc.invalidParams("Missing chainId in chainParams");case 5:if(o&&0!==o.length){e.next=7;break}throw Z.ethErrors.rpc.invalidParams("Missing rpcUrls in chainParams");case 7:if(u){e.next=9;break}throw Z.ethErrors.rpc.invalidParams("Missing nativeCurrency in chainParams");case 9:r.addChain({chainNamespace:w.EN.SOLANA,chainId:a,ticker:(null===u||void 0===u?void 0:u.symbol)||"SOL",tickerName:(null===u||void 0===u?void 0:u.name)||"Solana",displayName:i,rpcTarget:o[0],blockExplorer:(null===c||void 0===c?void 0:c[0])||""});case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),switchSolanaChain:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.params){e.next=2;break}throw Z.ethErrors.rpc.invalidParams("Missing request params");case 2:if(t.params.chainId){e.next=4;break}throw Z.ethErrors.rpc.invalidParams("Missing chainId");case 4:return e.next=6,r.switchChain(t.params);case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return function(r){var e=r.addNewChainConfig,t=r.switchSolanaChain;return(0,m.UZ)([A("addSolanaChain",e),A("switchSolanaChain",t)])}(e)}},{key:"getAccountMiddleware",value:function(){var r=this,e={updatePrivatekey:function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.params){e.next=2;break}throw Z.ethErrors.rpc.invalidParams("Missing request params");case 2:if(t.params.privateKey){e.next=4;break}throw Z.ethErrors.rpc.invalidParams("Missing privateKey");case 4:return n=t.params.privateKey,e.next=7,r.updateAccount({privateKey:n});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return function(r){var e=r.updatePrivatekey;return(0,m.UZ)([A("updateAccount",e)])}(e)}}]),t}(y.Z);(0,p.Z)(R,"getProviderInstance",function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=new R({config:{chainConfig:e.chainConfig}}),r.next=3,t.setupProvider(e.privKey);case 3:return r.abrupt("return",t);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());var H=function(){function r(e){(0,c.Z)(this,r),(0,p.Z)(this,"provider",void 0),this.provider=e}return(0,u.Z)(r,[{key:"requestAccounts",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(){var e;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"requestAccounts",params:{}});case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}()},{key:"signAndSendTransaction",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"signAndSendTransaction",params:{message:l().encode(e.serialize({requireAllSignatures:!1}))}});case 2:return t=r.sent,n=t.signature,r.abrupt("return",{signature:n});case 5:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"signTransaction",params:{message:l().encode(e.serialize({requireAllSignatures:!1}))}});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t,n;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.map((function(r){return l().encode(r.serialize({requireAllSignatures:!1}))})),r.next=3,this.provider.request({method:"signAllTransactions",params:{message:t}});case 3:return n=r.sent,r.abrupt("return",n);case 5:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"signMessage",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request({method:"signMessage",params:{message:e}});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()},{key:"request",value:function(){var r=(0,o.Z)((0,s.Z)().mark((function r(e){var t;return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.provider.request(e);case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r,this)})));return function(e){return r.apply(this,arguments)}}()}]),r}()}}]);